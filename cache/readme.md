#### cache






##### 进程内缓存



实现载体

* 带锁`map`
* 第三方库`leveldb`



优点

* 节省网络带宽
* 响应时延会更低


适用:

* 适用于只读数据



如何写入数据 `localCache`



`localCache`一般适用于只读数据,那么只读数据如何写入呢?

假设一个请求过来,首先访问localCache,如果没有的话,在进行查找数据库(效仿缓存用法)

那么假如`localCache`需要变更,那么我们如何变更数据呢

* 起一个`Timer`实时进行数据的刷新
* 提供一个`Http`接口实现数据的刷新







##### Redis和Memcache


内存分配

* `memcache`采用预分配内存池的方式管理内存,能够省去内存分配的时间
* `redis`采用临时申请空间,可能导致碎片


虚拟内存的使用
*  `memcache` 把所有的数据都存储在物理内存中
*  `redis`有自己的`VM`机制,理论上能够存储比物理内存更多的数据,当数据超量的时候,会引起`SWAP`,把冷数据刷到磁盘上


网络模型:

* `memcache`使用非阻塞`IO`复用模型,


线程模型:

* `memcache`采用多线程,主线程监听,子线程接受请求,执行请求,这个过程中,可能存在锁冲突
* `redis`采用单线程




##### redis set 常用操作

```
# 一系列value中,重复的value不会被添加
sadd [key] [value1] [value2] ...
```